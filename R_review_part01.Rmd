---
title: "R_review_part01"
author: "Kristin Henderson"
date: "2025-08-26"
output: html_document
---

This review is based on the book: https://r4ds.hadley.nz/

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
# install.packages("ggthemes")
# install.packages("palmerpenguins")
library(tidyverse)
library(palmerpenguins)
library(ggthemes)
```

## Data Viz Basics

```{r}
penguins
```

```{r}
?penguins
```

Motivating question:
What does the relationship between flipper length and body mass look like?

Create an empty graph
```{r}
ggplot(data = penguins)
```

Define how variables are mapped to the visual properties (aesthetics) of the plot. For now, just map variables to the x and y aesthetics.
```{r}
ggplot(data = penguins, 
       mapping = aes(x = flipper_length_mm, y = body_mass_g))
```

Now articulate how to represent the observations on the plot by defining a geom (geometrical object).
```{r}
ggplot(
  data = penguins,
  mapping = aes(x = flipper_length_mm, y = body_mass_g)
  ) + 
  geom_point()
```

When a categorical variable is mapped to an aesthetic, scaling is implemented. ggplot2 automatically assignes a unique value of the aesthetic (here a color) to the variable and by default adds a legend.
```{r warning=FALSE, message=FALSE}
ggplot(
  data = penguins,
  mapping = aes(x = flipper_length_mm, y=body_mass_g, color = species)
) + 
  geom_point()
```

Add a smooth curve that displays the relationship between x and y. When aesthetic mappings are defined in ggplot(), they are assigned at the global level and get passed down to each subsequent geom layer.
```{r warning=FALSE, message=FALSE}
ggplot(
  data = penguins,
  mapping = aes(x = flipper_length_mm, y = body_mass_g, color = species) 
  ) +
    geom_point() + 
    geom_smooth(method = 'lm')
```

This time add the aesthetic mapping for colored points at the local level.
```{r warning=FALSE, message=FALSE}
ggplot(
  data = penguins,
  mapping = aes(x = flipper_length_mm, y = body_mass_g)
) +
  geom_point(mapping = aes(color = species)) + 
  geom_smooth(method = 'lm')
```

Map to a shape aesthetic in addition to color.
```{r warning=FALSE, message=FALSE}
ggplot(
  data = penguins,
  mapping = aes(x = flipper_length_mm, y = body_mass_g)
) +
  geom_point(mapping = aes(color = species, shape = species)) +
  geom_smooth(method = 'lm')
```

Improve the labels and color palette.
```{r warning=FALSE, message=FALSE}
ggplot(
  data = penguins,
  mapping = aes(x = flipper_length_mm, y = body_mass_g)
) + 
  geom_point(aes(color = species, shape = species)) + 
  geom_smooth(method = 'lm') +
  labs(
    title = "Body mass and flipper length", 
    subtitle = "Dimensions for Adelie, Chinstrap, and Gentoo Penguins", 
    x = "Flipper length (mm)",
    y = "Body mass (g)",
    color = "Species", shape = "Species"
  ) +
  scale_color_colorblind()
```

A more concise way to write ggplot2 code:
```{r message=F, warning=F}
ggplot(penguins, aes(x = flipper_length_mm, y = body_mass_g)) +
  geom_point()
```

And using the pipe:
```{r message=F, warning=F}
penguins %>% 
  ggplot(aes(x = flipper_length_mm, y = body_mass_g)) +
  geom_point()
```

Visualizing the distribution of a categorical variable using a bar chart:
```{r}
ggplot(penguins, aes(x = species)) + 
  geom_bar()
```

Transform variable to a factor to reorder the levels for plotting.
```{r}
ggplot(penguins, aes(x = fct_infreq(species))) + 
  geom_bar()
```

Visualize a histogram of a continuous variable:
```{r message=F, warning=F}
ggplot(penguins, aes(x = body_mass_g)) +
  geom_histogram(binwidth = 200)
```

Plot different binwidths to reveal the shape of the distribution:
```{r message=F, warning=F}
ggplot(penguins, aes(x = body_mass_g)) +
  geom_histogram(binwidth = 20)
ggplot(penguins, aes(x = body_mass_g)) +
  geom_histogram(binwidth=2000)
```

Plot a density plot. It shows fewer details but can be helpful for seeing the overall distribution shape including modes and skewness.
```{r message=F, warning=F}
ggplot(penguins, aes(x = body_mass_g)) +
  geom_density()
```

We can use side-by-side boxplots to visualize relationships between a numerical and categorical variable.
```{r message=F, warning=F}
ggplot(penguins, aes(x = species, y = body_mass_g)) +
  geom_boxplot()
```
Or we can compare distributions with density plots.
```{r message=F, warning=F}
ggplot(penguins, aes(x = body_mass_g, color = species)) +
  geom_density(linewidth = 0.75)
```

This is the same plot using fill and alpha. Here we map species to the color and fill aesthetics, and we set the value of the alpha aesthetic.
```{r message=F, warning=F}
ggplot(penguins, aes(x = body_mass_g, color = species, fill = species)) + 
  geom_density(alpha = 0.5)
```

Create stacked bar plots to visualize the relationship between 2 categorical variables.
```{r message=F, warning=F}
ggplot(penguins, aes(x = island, fill = species)) +
  geom_bar()
```

Use position = "fill" to create a relative frequency plot to compare species distributions across islands.
```{r message=F, warning=F}
ggplot(penguins, aes(x = island, fill = species)) +
  geom_bar(position = "fill")
```

```{r}
library(tswge)
walmart = read.csv(file.choose(), header = TRUE)
Stor8Item1 = walmart %>% filter(item == 1 & store == 8)
head(walmart)
plotts.wge(Stor8Item1$sales)
acf(Stor8Item1$sales)
```

```{r}
#truncation 400
acf(Stor8Item1$sales)
parzen.wge(walmart$sales)
```

